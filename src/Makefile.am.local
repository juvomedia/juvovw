# put whatever (auto)make commands here, they will be included from Makefile.am
#
#lib_LTLIBRARIES =		\
#  libmylib.la
#
#libmylib_la_SOURCES = 		\
#  mylib.cc
#
#libmylib_la_LIBADD = 		\
#  @FW_PKGCONFIG_PREREQS_LIBS@
#
#libmylib_la_LDFLAGS = 	\
#  -version-info @FW_PACKAGE_MAJOR_VERSION@:@FW_PACKAGE_MINOR_VERSION@:0
#
#bin_PROGRAMS =		\
#  myprog
#
#myprog_SOURCES =	\
#  myprog.cc
#
#myprog_LDADD =		\
#  libmylib.la


lib_LTLIBRARIES = liballreduce.la

liballreduce_la_SOURCES = allreduce.cc
include_HEADERS = allreduce.h

bin_PROGRAMS = vw active_interactor

vw_SOURCES = hash.cc global_data.cc io.cc parse_regressor.cc parse_primitives.cc unique_sort.cc cache.cc \
	simple_label.cc oaa.cc csoaa.cc wap.cc sequence.cc parse_example.cc sparse_dense.cc network.cc parse_args.cc accumulate.cc \
	gd.cc lda_core.cc gd_mf.cc bfgs.cc noop.cc parser.cc vw.cc loss_functions.cc sender.cc main.cc
vw_LDADD = allreduce.o
vw_DEPENDENCIES = allreduce.o

active_interactor_SOURCES = active_interactor.cc

ACLOCAL_AMFLAGS = -I acinclude.d

INCLUDES += ${BOOST_CPPFLAGS} ${ZLIB_CPPFLAGS} ${PTHREAD_CFLAGS}
AM_LDFLAGS = ${BOOST_LDFLAGS} ${BOOST_PROGRAM_OPTIONS_LIB} ${ZLIB_LDFLAGS} ${PTHREAD_LIBS}

if PROFILE
AM_CXXFLAGS = -pg -g -D_FILE_OFFSET_BITS=64
else
AM_CXXFLAGS = -O3 -fomit-frame-pointer -ffast-math -fno-strict-aliasing -D_FILE_OFFSET_BITS=64
endif

if NITPICK
AM_CXXFLAGS += -Wextra -Wundef -Wshadow -Wunsafe-loop-optimizations -Wconversion -Wmissing-format-attribute
AM_CXXFLAGS += -Wredundant-decls -ansi -Wmissing-noreturn
endif

if PARALLELIZE
AM_CXXFLAGS += -Wno-strict-aliasing -fopenmp
endif

if FREEBSD
AM_CXXFLAGS += -l compat -Wall
else
AM_CXXFLAGS += -Wall -pedantic
endif

